(this["webpackJsonpaim-trainer"]=this["webpackJsonpaim-trainer"]||[]).push([[0],{25:function(t,e,i){},26:function(t,e,i){},27:function(t,e,i){},30:function(t,e,i){"use strict";i.r(e);var n=i(1),s=i.n(n),c=i(12),r=i.n(c),a=(i(25),i(26),i(13)),l=i(3),o=i(5),h=i(6),u=function(){function t(e,i){Object(o.a)(this,t),this.x=e,this.y=i}return Object(h.a)(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtr",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"mag",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"mult",value:function(e){return new t(this.x*e,this.y*e)}},{key:"normal",value:function(){return new t(-this.y,this.x).unit()}},{key:"unit",value:function(){return 0===this.mag()?new t(0,0):new t(this.x/this.mag(),this.y/this.mag())}},{key:"drawVec",value:function(t,e,i,n,s){t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.x*n,i+this.y*n),t.strokeStyle=s,t.stroke(),t.closePath()}}],[{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}}]),t}(),d=i(38),f=function(){function t(e,i,n,s,c,r,a){Object(o.a)(this,t),this.id=Object(d.a)(),this.r=n,this.orignalR=0,this.clickR=n,this.growth=1,this.dirChangeProp=a,this.speed=r,this.birth=Date.now(),this.pos=new u(e,i),this.clickPos=null,this.isActive=!0,this.isClicked=!1,this.clickedTime=null,this.vel=new u(Math.random(),Math.random()),s.current.push(this),c.current.targets.push(this)}return Object(h.a)(t,[{key:"drawTarget",value:function(t){this.orignalR<this.r&&1===this.growth&&this.isActive?(this.orignalR=this.orignalR+.3,(this.orignalR===this.r||this.orignalR>this.r)&&(this.growth=-1,this.orignalR=this.r)):this.orignalR>0&&-1===this.growth&&this.isActive&&(this.orignalR=this.orignalR-.2,(0===this.orignalR||this.orignalR<0)&&(this.growth=1,this.orignalR=0)),this.isActive?this.isClicked?(t.beginPath(),t.arc(this.pos.x,this.pos.y,this.orignalR,0,2*Math.PI),t.stroke(),t.strokeStyle="#4DFF00",t.lineWidth=2,t.closePath()):(t.beginPath(),t.arc(this.pos.x,this.pos.y,this.orignalR,0,2*Math.PI),t.fillStyle="#FF5100",t.fill(),t.closePath(),t.beginPath(),t.arc(this.pos.x,this.pos.y,3*this.orignalR/4,0,2*Math.PI),t.fillStyle="#FFFFFF",t.fill(),t.closePath(),t.beginPath(),t.arc(this.pos.x,this.pos.y,this.orignalR/2,0,2*Math.PI),t.fillStyle="#FF5100",t.fill(),t.closePath(),t.beginPath(),t.arc(this.pos.x,this.pos.y,1*this.orignalR/4,0,2*Math.PI),t.fillStyle="#FFFFFF",t.fill(),t.closePath()):(t.beginPath(),t.arc(this.pos.x,this.pos.y,this.orignalR,0,2*Math.PI),t.stroke(),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.closePath())}},{key:"canDie",value:function(){return!!(this.isClicked&&this.clickedTime+200<Date.now())||this.birth+2500<Date.now()}},{key:"setClickedRadius",value:function(){this.clickR=this.orignalR}},{key:"reposition",value:function(t){var e,i=[1,-1],n=Math.floor(2*Math.random()),s=Math.floor(2*Math.random());Math.random()<this.dirChangeProp&&(this.vel=new u(i[n]*Math.random(),i[s]*Math.random()));var c=!1;(e=this.pos.add(this.vel*this.speed)).x+this.r>t.right&&(this.vel=new u(-1*this.vel.x,this.vel.y),c=!0),e.y+this.r>window.bottom&&(this.vel=new u(this.vel.x,-1*this.vel.y),c=!0),e.x<t.left&&(this.vel=new u(-1*this.vel.x,this.vel.y),c=!0),e.y<t.top&&(this.vel=new u(this.vel.x,-1*this.vel.y),c=!0),c&&(e=this.pos.add(this.vel*this.speed)),this.pos=e}},{key:"updateCreature",value:function(t,e){this.birth+2200<Date.now()&&(this.isActive=!1),this.drawTarget(t)}}]),t}(),j=(i(27),i(37)),g=i(0),b=function(t){var e=new Array(5).fill(1);return Object(g.jsx)("div",{style:{color:"white",fontWeight:"600"},className:"d-flex justify-content-center align-items-end h-100",children:e.map((function(e,i){return Object(g.jsx)("div",{className:"p-1",children:Object(g.jsx)(j.a,{style:{color:i<t.value?"red":"white"}})})}))})},w=function(t){var e=Object(n.useState)(5),i=Object(l.a)(e,2),s=i[0],c=i[1];return Object(n.useEffect)((function(){s>0&&setTimeout((function(){c(s-1)}),1e3)}),[s]),Object(g.jsx)("div",{style:{color:"white",fontSize:"large",fontWeight:"700"},children:s})},m=function(t){var e=t.data;if(e){var i,n,s=0,c=0,r=e.finishTime-e.targets[0].birth,a=0;return e.targets.forEach((function(t){t.birth<e.finishTime&&(s++,t.isClicked&&(c++,a+=(t.clickR-t.pos.subtr(t.clickPos).mag())/t.clickR))})),a=0===c?0:a/c*100,i=c/s*100,n=c/r*1e3,Object(g.jsxs)("div",{className:"d-flex flex-column justify-content-start align-items-center ",style:{width:300},children:[Object(g.jsx)("div",{className:"mb-2",style:{fontSize:"x-large"},children:"Game over"}),Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4 w-100 ",children:[Object(g.jsx)("span",{children:"Hits"}),Object(g.jsx)("span",{children:c})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-1 w-100",children:[Object(g.jsx)("span",{children:"Miss"}),Object(g.jsx)("span",{children:s-c})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-1 w-100",children:[Object(g.jsx)("span",{children:"Accuracy"}),Object(g.jsxs)("span",{children:[Math.round(100*i)/100," %"]})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-1 w-100",children:[Object(g.jsx)("span",{children:"Precision"}),Object(g.jsxs)("span",{children:[Math.round(100*a)/100," %"]})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-1 w-100",children:[Object(g.jsx)("span",{children:"Speed"}),Object(g.jsxs)("span",{children:[Math.round(100*n)/100," targets/sec"]})]}),Object(g.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-1 mb-4 w-100",children:[Object(g.jsx)("span",{children:"Time"}),Object(g.jsxs)("span",{children:[r/1e3," sec"]})]}),Object(g.jsx)("button",{onClick:t.startGame,className:" btn core-button py-2 px-3",children:"Restart"})]})}return Object(g.jsx)("div",{})};function v(t,e){var i,n;null===t||void 0===t||t.clearRect(0,0,null===e||void 0===e||null===(i=e.current)||void 0===i?void 0:i.clientWidth,null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.clientHeight)}var x={left:20,top:120,right:window.innerWidth-20,bottom:window.innerHeight-20},y=function(){var t=Object(n.useState)(null),e=Object(l.a)(t,2),i=e[0],s=e[1],c=Object(n.useRef)(null),r=Object(n.useRef)(Date.now()),o=Object(n.useState)(5),h=Object(l.a)(o,2),d=h[0],j=h[1],y=Object(n.useRef)(5),O=Object(n.useRef)(0),p=(Object(n.useRef)(.5),Object(n.useRef)(!1)),F=Object(n.useState)(p.current),k=Object(l.a)(F,2),R=k[0],P=k[1],M=Object(n.useState)(!1),C=Object(l.a)(M,2),S=C[0],N=C[1],T=Object(n.useState)(!1),W=Object(l.a)(T,2),D=W[0],A=W[1],I=Object(n.useRef)([]),H=Object(n.useRef)({totalTargets:0,targets:[],finishTime:null});function E(){S||N(!0),v(i,c),P(!0),A(!0),j(5),O.current=0,r.current=Date.now(),y.current=5,I.current=[],p.current=!0}function B(){v(i,c),P(!1),p.current=!1,console.log(H.current.targets)}function z(t){if(p.current){v(i,c),function(t){for(var e=0;e<t.current.length;e++)t.current[e].canDie()&&(t.current[e].isClicked||(y.current=y.current-1,console.log(y.current),j(y.current),0===y.current&&(H.current.finishTime=Date.now(),B(),v(i,c))),t.current.splice(e,1))}(I);var e=600;100*O.current<2e3-e&&(e=2e3-100*O.current),Date.now()>r.current+e&&(!function(t){if(c&&c.current){var e=20+Math.random()*(c.current.clientWidth-40),i=20+Math.random()*(c.current.clientHeight-40);new f(e,i,20,t,H,1,.5),H.current.totalTargets=H.current.totalTargets+1}}(I),r.current=Date.now(),O.current=O.current+1),I.current.forEach((function(t,e){t.updateCreature(i,x)})),requestAnimationFrame(z)}else v(i,c)}return Object(n.useEffect)((function(){if(c&&c.current){console.log({canvasRef:c});var t=document.getElementById("canvas").getContext("2d");c.current.focus(),s(t)}}),[c]),Object(n.useEffect)((function(){var t=null;if(i&&R)return console.log("playing...."),A(!0),setTimeout((function(){console.log("started...."),A(!1),t=requestAnimationFrame(z)}),5500),function(){t&&cancelAnimationFrame(t)}}),[i,R]),Object(g.jsxs)("div",{style:{height:"100%",width:"100%"},className:"d-flex flex-column",children:[Object(g.jsx)("div",{style:{height:50,width:window.innerWidth},className:"d-flex justify-content-end align-items-center px-5",children:Object(g.jsx)(b,{value:d})}),Object(g.jsxs)("div",{style:{height:window.innerHeight-50,width:window.innerWidth,padding:20,position:"relative"},className:"d-flex justify-content-center align-items-center",children:[S?R?null:Object(g.jsx)("div",{style:{position:"absolute",width:window.innerWidth-80,height:window.innerHeight-90,backgroundColor:"#FFFFFF72",color:"white",fontSize:"large",fontWeight:"700"},className:"d-flex flex-column justify-content-center align-items-center",children:Object(g.jsx)(m,{data:H.current,startGame:E})}):Object(g.jsx)("div",{style:{position:"absolute",width:window.innerWidth-80,height:window.innerHeight-90,backgroundColor:"#FFFFFF72",color:"white",fontSize:"large",fontWeight:"700"},className:"d-flex flex-column justify-content-center align-items-center",children:Object(g.jsx)("button",{onClick:E,className:" btn core-button py-2 px-3",children:"Play"})}),D?Object(g.jsx)("div",{style:{position:"absolute",width:window.innerWidth-80,height:window.innerHeight-90,backgroundColor:"#FFFFFF72",color:"white",fontSize:"large",fontWeight:"700"},className:"d-flex justify-content-center align-items-center",children:Object(g.jsx)(w,{})}):null,Object(g.jsx)("canvas",Object(a.a)({style:{position:"absolute"},className:"canvas",onClick:function(t){for(var e=new u(t.clientX-40,t.clientY-70),i=I.current,n=0;n<i.length;n++)i[n].pos.subtr(e).mag()<i[n].orignalR&&i[n].isActive&&(i[n].isClicked=!0,i[n].clickedTime=Date.now(),i[n].setClickedRadius(),i[n].clickPos=e)},onKeyDown:function(t){32===t.keyCode&&(console.log("space key pressed"),B())},tabIndex:1,id:"canvas",ref:c,width:window.innerWidth-80,height:window.innerHeight-90},"style",{backgroundColor:"#1B1B1B"}))]})]})};i(29);var O=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(y,{})})},p=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,39)).then((function(e){var i=e.getCLS,n=e.getFID,s=e.getFCP,c=e.getLCP,r=e.getTTFB;i(t),n(t),s(t),c(t),r(t)}))};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(O,{})}),document.getElementById("root")),p()}},[[30,1,2]]]);
//# sourceMappingURL=main.9fa8a8d8.chunk.js.map